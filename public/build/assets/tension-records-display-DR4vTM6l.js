import{r as n,j as e,H as V}from"./app-Bzkn-pxs.js";import{u as U,C as $,T as O,a as B,b,c as G,f as N,d as q,e as C,g as W,h as J,i as Q,j as X,E as Y,P as j,k as Z,l as ee,m as S,n as y}from"./index-xL7y5FGK.js";import{c as D,d as M,f as P,g as ae,h as v,i as se,A as te}from"./app-layout-DmDEcB4A.js";import{d as k}from"./index-DGbSN1ZL.js";import{a as F,B as g}from"./createLucideIcon-DXGtVaN5.js";import{C as R}from"./checkbox-BoRrytU8.js";import{I as re}from"./input-_uek4hTr.js";import{E as ne}from"./eye-DdWiBHW1.js";/* empty css            */import"./index-BP0LCq74.js";import"./index-BRkAwv2h.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],oe=F("Download",le);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ce=F("Pencil",ie),T=[{id:"select",header:({table:a})=>e.jsx(R,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>a.toggleAllPageRowsSelected(!!t),"aria-label":"Select all"}),cell:({row:a})=>e.jsx(R,{checked:a.getIsSelected(),onCheckedChange:t=>a.toggleSelected(!!t),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"Date",header:"Record Date",accessorFn:a=>a.created_at,cell:({getValue:a})=>{const t=new Date(a());return e.jsx("div",{children:t.toLocaleString("en-ID",{day:"2-digit",month:"numeric",year:"numeric"})})}},{accessorKey:"Item Number",header:"Item Number",accessorFn:a=>a.metadata?.item_number,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Operator",header:"Operator",accessorFn:a=>a.metadata?.operator,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Machine Number",header:"Machine Number",accessorFn:a=>a.form_data?.machineNumber,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Density",header:"Density (Dtex)",accessorFn:a=>a.form_data?.dtexNumber,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Table Twist (TPM)",header:"Table Twist (TPM)",accessorFn:a=>a.form_data?.tpm,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Cycle Speed (RPM)",header:"Cycle Speed (RPM)",accessorFn:a=>a.form_data?.rpm,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Spec. Tension (cN)",header:"Spec. Tension (cN)",accessorFn:a=>a.form_data?.specTens,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Tens. Deviation (cN)",header:"Tens. Deviation (cN)",accessorFn:a=>a.form_data?.tensPlus,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{accessorKey:"Meters Check (m)",header:"Meters Check (m)",accessorFn:a=>a.form_data?.metersCheck,cell:({getValue:a})=>e.jsx("div",{className:"capitalize",children:a()??"N/A"})},{id:"actions",header:"Actions",enableHiding:!1,cell:({row:a})=>{const t=a.original,i=()=>{const x=new Blob([t.csv_data],{type:"text/csv"}),m=URL.createObjectURL(x),c=document.createElement("a");c.href=m,c.download=`ID${t.id}-${t.created_at}-${t.metadata.machine_number}-${t.metadata.operator}.csv`,c.click(),URL.revokeObjectURL(m)};return e.jsxs(D,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(g,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Y,{})]})}),e.jsxs(P,{align:"end",children:[e.jsxs(v,{onClick:i,children:[e.jsx(oe,{}),"Download"]}),e.jsx(se,{}),e.jsxs(v,{children:[e.jsx(ne,{}),"View"]}),e.jsxs(v,{children:[e.jsx(ce,{}),"Update"]})]})]})}}];function de(){const[a,t]=n.useState([]),[i,x]=n.useState([]),[m,c]=n.useState({}),[_,z]=n.useState({}),[A,I]=n.useState([]),[me,L]=n.useState(0),[E,K]=n.useState(0),[ue,f]=n.useState(!1),[u,w]=n.useState(""),[d,H]=n.useState({pageIndex:0,pageSize:10}),l=U({data:A,columns:T,onSortingChange:t,onColumnFiltersChange:x,getCoreRowModel:X(),getPaginationRowModel:Q(),manualPagination:!0,manualFiltering:!0,getSortedRowModel:J(),getFilteredRowModel:W(),onGlobalFilterChange:w,onColumnVisibilityChange:c,onRowSelectionChange:z,onPaginationChange:H,pageCount:E,state:{sorting:a,columnFilters:i,columnVisibility:m,rowSelection:_,pagination:d}});return n.useEffect(()=>{const s=new AbortController;return(async()=>{f(!0);const h=new URLSearchParams({page:(d.pageIndex+1).toString(),per_page:d.pageSize.toString()});if(u&&h.append("search",u),i.forEach(o=>{o.value&&h.append(o.id,String(o.value))}),a.length>0){const o=a[0];h.append("sort_by",o.id),h.append("sort_dir",o.desc?"desc":"asc")}try{const p=await(await fetch(`http://127.0.0.1:8000/tension-records?${h.toString()}`,{credentials:"include",signal:s.signal})).json();I(p.data),L(p.total),K(p.last_page)}catch(o){o.name!=="AbortError"&&console.error("Fetch error:",o)}finally{f(!1)}})(),()=>s.abort()},[d.pageIndex,d.pageSize,a,u,i]),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4",children:[e.jsx(re,{placeholder:"Search value",value:u??"",onChange:s=>w(s.target.value),className:"max-w-sm"}),e.jsxs(D,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(g,{variant:"outline",className:"ml-auto",children:["Columns ",e.jsx($,{})]})}),e.jsx(P,{align:"end",children:l.getAllColumns().filter(s=>s.getCanHide()).map(s=>e.jsx(ae,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:r=>s.toggleVisibility(!!r),children:s.id},s.id))})]})]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(O,{children:[e.jsx(B,{children:l.getHeaderGroups().map(s=>e.jsx(b,{children:s.headers.map(r=>e.jsx(G,{children:r.isPlaceholder?null:N(r.column.columnDef.header,r.getContext())},r.id))},s.id))}),e.jsx(q,{children:l.getRowModel().rows?.length?l.getRowModel().rows.map(s=>e.jsx(b,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(r=>e.jsx(C,{children:N(r.column.columnDef.cell,r.getContext())},r.id))},s.id)):e.jsx(b,{children:e.jsx(C,{colSpan:T.length,className:"h-24 text-center",children:"Contacting server for information..."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[l.getFilteredSelectedRowModel().rows.length," of"," ",l.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"})]})]})]})}const he=[{title:"Tension Records",href:k().url},{title:"Display",href:k().url}];function ye(){return e.jsxs(te,{breadcrumbs:he,children:[e.jsx(V,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(j,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(j,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(j,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]}),e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl md:min-h-min dark:border-sidebar-border",children:e.jsxs(Z,{defaultValue:"twisting",children:[e.jsxs(ee,{children:[e.jsx(S,{value:"twisting",children:"Twisting Tension"}),e.jsx(S,{value:"weaving",children:"Weaving Tension"})]}),e.jsx(y,{value:"twisting",children:e.jsx(de,{})}),e.jsx(y,{value:"weaving",children:"Underconstruction."})]})})]})]})}export{ye as default};
